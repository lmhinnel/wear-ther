const URL = "https://api.open-meteo.com/v1/forecast";

const PARAMS = [
  "temperature_2m",
  "apparent_temperature",
  "wind_speed_10m",
  "wind_direction_10m",
  "relative_humidity_2m",
  "precipitation",
  "precipitation_probability",
  "cloud_cover",
  "uv_index",
];

const paramsFn = PARAMS.join(",");

async function getWeather(latitude, longitude, days) {
  // return sampleRes
  try {
    const response = await fetch(
      `${URL}?latitude=${latitude}&longitude=${longitude}&current=${paramsFn}&forecast_days=${days}&hourly=${paramsFn}`
    );

    if (!response.ok) throw new Error("Failed to fetch weather data");

    const data = await response.json();
    return data;
  } catch (err) {
    console.error("Error fetching weather data:", err);
  }
}

const sampleRes = {
  latitude: 21,
  longitude: 105.875,
  generationtime_ms: 0.189781188964844,
  utc_offset_seconds: 0,
  timezone: "GMT",
  timezone_abbreviation: "GMT",
  elevation: 18,
  current_units: {
    time: "iso8601",
    interval: "seconds",
    temperature_2m: "°C",
    apparent_temperature: "°C",
    wind_speed_10m: "km/h",
    wind_direction_10m: "°",
    relative_humidity_2m: "%",
    precipitation: "mm",
    precipitation_probability: "%",
    cloud_cover: "%",
    uv_index: "",
  },
  current: {
    time: "2025-10-19T16:30",
    interval: 900,
    temperature_2m: 25,
    apparent_temperature: 29.7,
    wind_speed_10m: 7.2,
    wind_direction_10m: 273,
    relative_humidity_2m: 92,
    precipitation: 0.2,
    precipitation_probability: 79,
    cloud_cover: 86,
    uv_index: 0,
  },
  hourly_units: {
    time: "iso8601",
    temperature_2m: "°C",
    apparent_temperature: "°C",
    wind_speed_10m: "km/h",
    wind_direction_10m: "°",
    relative_humidity_2m: "%",
    precipitation: "mm",
    precipitation_probability: "%",
    cloud_cover: "%",
    uv_index: "",
  },
  hourly: {
    time: [
      "2025-10-19T00:00",
      "2025-10-19T01:00",
      "2025-10-19T02:00",
      "2025-10-19T03:00",
      "2025-10-19T04:00",
      "2025-10-19T05:00",
      "2025-10-19T06:00",
      "2025-10-19T07:00",
      "2025-10-19T08:00",
      "2025-10-19T09:00",
      "2025-10-19T10:00",
      "2025-10-19T11:00",
      "2025-10-19T12:00",
      "2025-10-19T13:00",
      "2025-10-19T14:00",
      "2025-10-19T15:00",
      "2025-10-19T16:00",
      "2025-10-19T17:00",
      "2025-10-19T18:00",
      "2025-10-19T19:00",
      "2025-10-19T20:00",
      "2025-10-19T21:00",
      "2025-10-19T22:00",
      "2025-10-19T23:00",
      "2025-10-20T00:00",
      "2025-10-20T01:00",
      "2025-10-20T02:00",
      "2025-10-20T03:00",
      "2025-10-20T04:00",
      "2025-10-20T05:00",
      "2025-10-20T06:00",
      "2025-10-20T07:00",
      "2025-10-20T08:00",
      "2025-10-20T09:00",
      "2025-10-20T10:00",
      "2025-10-20T11:00",
      "2025-10-20T12:00",
      "2025-10-20T13:00",
      "2025-10-20T14:00",
      "2025-10-20T15:00",
      "2025-10-20T16:00",
      "2025-10-20T17:00",
      "2025-10-20T18:00",
      "2025-10-20T19:00",
      "2025-10-20T20:00",
      "2025-10-20T21:00",
      "2025-10-20T22:00",
      "2025-10-20T23:00",
      "2025-10-21T00:00",
      "2025-10-21T01:00",
      "2025-10-21T02:00",
      "2025-10-21T03:00",
      "2025-10-21T04:00",
      "2025-10-21T05:00",
      "2025-10-21T06:00",
      "2025-10-21T07:00",
      "2025-10-21T08:00",
      "2025-10-21T09:00",
      "2025-10-21T10:00",
      "2025-10-21T11:00",
      "2025-10-21T12:00",
      "2025-10-21T13:00",
      "2025-10-21T14:00",
      "2025-10-21T15:00",
      "2025-10-21T16:00",
      "2025-10-21T17:00",
      "2025-10-21T18:00",
      "2025-10-21T19:00",
      "2025-10-21T20:00",
      "2025-10-21T21:00",
      "2025-10-21T22:00",
      "2025-10-21T23:00",
    ],
    temperature_2m: [
      25.5, 26.9, 27.9, 28.4, 29, 29.5, 31.9, 31.8, 30.5, 30.1, 29.2, 27.6, 27,
      26.6, 25.9, 25.5, 25.1, 24.8, 24.6, 24.4, 24.1, 24, 24, 23.8, 24, 24.9,
      25.7, 26.4, 27.5, 28.4, 28.8, 29.1, 28.9, 28.4, 27.6, 26.1, 25, 24.3,
      23.7, 23.1, 22.7, 22.2, 21.8, 21.4, 21.1, 20.8, 20.5, 20.3, 20.9, 22.4,
      23.4, 24.4, 25.3, 26.2, 26.7, 27.2, 27.1, 26.6, 25.6, 24.2, 23.1, 22.3,
      21.5, 20.9, 20.2, 19.6, 19.3, 19, 18.7, 18.5, 18.4, 18.2,
    ],
    apparent_temperature: [
      30.9, 31.9, 32.7, 32.7, 33.4, 34, 37.7, 37.4, 35.8, 35.7, 35, 33.1, 33.5,
      32.8, 31.8, 30.9, 30, 29.5, 28.8, 28.5, 28.3, 28.3, 28, 27.1, 27.2, 27.9,
      27.6, 28.1, 29.8, 31, 30.6, 31.1, 30.6, 30.1, 29.8, 28.8, 27.9, 27.1,
      26.5, 25.8, 25.1, 24.4, 23.8, 23.2, 22.7, 22.4, 22.1, 21.7, 22.5, 23.4,
      23.6, 24.8, 26, 27.2, 27, 27.8, 26.9, 26.5, 25.7, 24.7, 23.7, 23.1, 22.4,
      21.7, 20.9, 20.2, 19.8, 19.5, 19.2, 19, 18.9, 18.8,
    ],
    wind_speed_10m: [
      6.6, 10.4, 11.8, 12.9, 13.1, 13.7, 10.9, 10.4, 10.8, 7.5, 4.9, 5.2, 1.5,
      0.8, 3.3, 5.1, 7.2, 6.9, 8.5, 9.4, 8.4, 7.9, 7.1, 6.5, 6.5, 8.4, 13.2,
      16.5, 16.4, 16.4, 15.9, 15.9, 15.4, 13.8, 9.7, 6.4, 5, 4.7, 4.7, 4.8, 5.6,
      6.2, 6.5, 7.1, 7.2, 6.3, 6.3, 5.8, 4.7, 8.3, 13.7, 17.4, 19.1, 18.7, 19.5,
      18.4, 17.8, 16.4, 14, 10.8, 9.5, 8.2, 6.8, 6.5, 6.6, 5.9, 5.6, 5.6, 5,
      4.8, 4, 3.6,
    ],
    wind_direction_10m: [
      311, 316, 329, 337, 351, 355, 352, 358, 15, 35, 54, 65, 135, 243, 283,
      278, 270, 279, 306, 310, 313, 336, 345, 357, 360, 7, 17, 23, 26, 29, 28,
      28, 33, 41, 45, 38, 21, 9, 360, 347, 345, 353, 354, 345, 342, 347, 347,
      353, 360, 18, 18, 22, 20, 19, 16, 17, 21, 26, 29, 26, 29, 29, 18, 3, 351,
      346, 333, 333, 339, 347, 350, 354,
    ],
    relative_humidity_2m: [
      93, 88, 82, 77, 74, 71, 65, 66, 73, 74, 76, 82, 88, 88, 91, 91, 92, 91,
      90, 91, 92, 93, 89, 83, 81, 77, 71, 68, 65, 62, 59, 58, 59, 59, 61, 67,
      72, 74, 76, 77, 78, 79, 79, 79, 79, 79, 80, 78, 76, 69, 64, 61, 58, 56,
      54, 54, 53, 54, 56, 60, 63, 66, 69, 70, 71, 72, 72, 73, 73, 73, 73, 73,
    ],
    precipitation: [
      0, 0, 0, 0, 0, 0, 0, 0, 1.7, 1.7, 0.6, 1, 1.7, 2, 1.6, 0.9, 0.8, 0.1, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0,
    ],
    precipitation_probability: [
      20, 5, 15, 18, 53, 55, 43, 53, 78, 93, 93, 93, 90, 100, 95, 95, 85, 75,
      53, 33, 20, 5, 3, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0,
    ],
    cloud_cover: [
      72, 49, 58, 57, 60, 51, 46, 57, 100, 100, 100, 100, 100, 100, 100, 100,
      86, 77, 75, 68, 74, 66, 58, 73, 67, 80, 71, 73, 83, 81, 83, 68, 64, 46,
      12, 4, 10, 8, 5, 3, 1, 1, 8, 8, 0, 12, 34, 41, 30, 11, 5, 43, 50, 57, 48,
      38, 12, 7, 0, 0, 0, 0, 0, 5, 3, 0, 0, 0, 0, 3, 9, 0,
    ],
    uv_index: [
      0.4, 1.85, 3.75, 5.5, 6.8, 7.4, 6, 5.65, 4.45, 2.55, 0.3, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 0, 0.4, 1.85, 3.7, 5.5, 6.8, 7.35, 7.1, 5.95, 4.2,
      2.55, 0.85, 0.05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4, 1.8, 3.7, 5.45,
      6.75, 7.3, 7.05, 6.05, 4.4, 2.5, 0.85, 0.05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0,
    ],
  },
};
